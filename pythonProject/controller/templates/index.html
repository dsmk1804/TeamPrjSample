<!DOCTYPE html>
<html lang="ko" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>캐릭터-상품 매칭 서비스</title>

    <!--    <script src="css/js/main.css"></script>-->

    <!--    <link rel="stylesheet" href="/css/main.css">-->

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap JS (Optional, if you want to use dropdown functionality) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <style>
        body {
            background-color: #E3FFDD;
            margin: 0;
        }

        body > not(.wrapper){
           background-color: #E3FFDD;

        }

        .wrapper {
            padding: 20px;
            display: flex;
            flex-direction: row;
            width: 100%;
            justify-content: space-between;
        }

        .wrapper > div {
            border: 1px solid #000;
            box-sizing: border-box;
        }

        .wrapper > div:last-child {
            border-right: none;
        }

        .choose {
            margin-bottom: 20px;
            flex-grow: 1;
            flex: 0.125;
            background-color: #ffffff;

        }

        .image-up {
            display: flex;
            flex-direction: column;
            align-items: center;

        }

        .btn-container {
            display: flex;
            flex-direction: row;
            margin-left: auto;
            gap: 10px;
            margin-top: 10px;

        }


        .btn-secondary {
            background-color: #E3FFDD !important;
            color: #000000 !important;
            border: 2px solid !important;
        }

        .maincon {
            flex-grow: 2;
            flex: 0.5;
            margin-right: 20px;
            margin-left: 20px;
            background-color: #E6E2FF;
        }

        .gallery {
            flex-grow: 1;
            background-color: #ffffff;
            flex:0.125;
        }

        .gallery img {
            width: 200px;
            height: 200px;

        }

        .header, footer {
            text-align: center;
            background-color: #E3FFDD;
        }

        .h1 {
            text-align: center;
            border: 1px;
        }

        label {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #E6E2FF;
            margin-right: 10px;

        }

        #uploadImage, #deleteImage {
            background-color: #9370db;

        }

        #deleteImage {
            background-color: transparent;
        }

        #categoryBtn {
            display: inline-block;
            width: 220px;
            height: 50px;
            background-image: url('static/sample/food.png');
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            overflow: hidden;
            border: none;
            text-size: 20px;
        }

        .dropdown-btn {
            display: inline-block;
            height: 50px;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center;
            overflow: hidden;
            border: none;
            font-size: 20px;

        }

        #deleteImage {
            background-color: transprent;
        }

        #categoryBtn: hover {
            background-image: url('static/sample/food.png'); /* 호버 효과시에도 이미지를 유지하기 위해 추가 */
        }

        #themeDropdown .dropdown-btn {
            background-image: url('static/sample/mood.png');
        }

        #personalityDropdown .dropdown-btn {
            background-image: url('static/sample/personal.png');
        }

        #ageDropdown .dropdown-btn {
            background-image: url('static/sample/age.png');
        }

        .dropdown {
            width: 100%;
        }

        .dropdown-menu {
            width: 100%;
        }

    </style>

    <script>
        document.addEventListener("DOMContentLoaded", function() {

        // 이미지 업로드 처리
        document.getElementById("imageUpload").addEventListener("change", function(e) {
            const file = e.target.files[0];
            if (file && file.type.startsWith("image/")) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const uploadImage = document.getElementById("uploadImage");
                    const deleteButton = document.getElementById("deleteImage");

                    uploadImage.src = event.target.result;
                    uploadImage.style.width = "500px";
                    uploadImage.style.height = "500px";
                    deleteButton.style.display = "block";
                };
                reader.readAsDataURL(file);
            }
        });

        // 이미지 삭제 처리
        document.getElementById("deleteImage").addEventListener("click", function() {
            const uploadImage = document.getElementById("uploadImage");
            const deleteButton = document.getElementById("deleteImage");
            const imageUpload = document.getElementById("imageUpload");

            uploadImage.src = "static/sample/upload.png";
            uploadImage.style.width = "700px";
            uploadImage.style.height = "700px";
            deleteButton.style.display = ""; // 이미지를 삭제하면 삭제 버튼을 숨겨야 합니다.
            imageUpload.value = "";
        });

        // 드롭다운 메뉴 보이기 & 숨기기
        const categoryBtn = document.getElementById('categoryBtn');
        const dropdownMenu = document.getElementById('dropdownMenu');

        categoryBtn.addEventListener('mouseenter', () => dropdownMenu.style.display = 'block');
        categoryBtn.addEventListener('mouseleave', () => dropdownMenu.style.display = 'none');
        dropdownMenu.addEventListener('mouseenter', () => dropdownMenu.style.display = 'block');
        dropdownMenu.addEventListener('mouseleave', () => dropdownMenu.style.display = 'none');

        // 드롭다운 선택을 베이스로 따라 이미지 변화시키기
        function getSelectedImage(selectedItem, category) {
            const imageMap = {
                // ... (your imageMap here)
            };
            if (category && imageMap[category]) {
                return imageMap[category][selectedItem];
            } else {
                return imageMap[selectedItem];
            }
        }

        // 드롭다운 선택 이벤트를 처리하는 함수
        function handleDropdownSelection(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            const items = dropdown.querySelectorAll(".dropdown-item");

            items.forEach(item => {
                item.addEventListener("click", function() {
                    const btn = dropdown.querySelector(".dropdown-toggle");
                    btn.textContent = this.textContent;

                    const selectedText = this.textContent;
                    const category = this.closest('.dropdown').querySelector(".dropdown-toggle").textContent;
                    const selectedImage = getSelectedImage(selectedText, category);

                    if (selectedImage) {
                        const cardImage = document.querySelector(`#${dropdownId} .card-img-top`);
                        if (cardImage) {
                            cardImage.src = selectedImage;
                        }
                    }
                });
            });
        }

        // 각 드롭다운에 이벤트 리스너 추가
        ["categoryDropdown", "themeDropdown", "personalityDropdown", "ageDropdown"].forEach(handleDropdownSelection);

    });
    </script>

</head>

<body>
<!--헤더 부분-->
<header class="header">
    <h1>상품 X 애니메이션 콜라보 추천 AI 시스템</h1>
</header>

<div class="wrapper">

    <div class="choose">
        <div class="sidebar">
            <!--  상품 선택  -->
            <div id="categoryDropdown" class="dropdown flex-container">
                <button id="categoryBtn" class="btn btn-secondary dropdown-toggle dropdown-btn" href="#" role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                    식품
                </button>

                <ul id="dropdownMenu" class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">과자</a></li>
                    <li><a class="dropdown-item" href="#">라면</a></li>
                    <li><a class="dropdown-item" href="#">아이스크림</a></li>
                    <li><a class="dropdown-item" href="#">젤리</a></li>
                    <li><a class="dropdown-item" href="#">초콜릿</a></li>
                    <li><a class="dropdown-item" href="#">사탕</a></li>
                </ul>
            </div>

            <!-- 테마(분위기 선택) -->
            <div id="themeDropdown" class="dropdown flex-container">
                <button class="btn btn-secondary dropdown-toggle dropdown-btn" href="#" role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                    테마(분위기)
                </button>

                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">산뜻한</a></li>
                    <li><a class="dropdown-item" href="#">귀여운</a></li>
                    <li><a class="dropdown-item" href="#">도시적인</a></li>
                    <li><a class="dropdown-item" href="#">발랄한</a></li>
                    <li><a class="dropdown-item" href="#">통통 튀는</a></li>
                    <li><a class="dropdown-item" href="#">...</a></li>
                </ul>
            </div>

            <!-- 테마(성격 선택) -->
            <div id="personalityDropdown" class="dropdown flex-container">
                <button class="btn btn-secondary dropdown-toggle dropdown-btn" href="#" role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                    테마(성격)
                </button>

                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">친절한</a></li>
                    <li><a class="dropdown-item" href="#">활발한</a></li>
                    <li><a class="dropdown-item" href="#">장난끼 많은</a></li>
                    <li><a class="dropdown-item" href="#">소심한</a></li>
                    <li><a class="dropdown-item" href="#">깜찍한</a></li>
                    <li><a class="dropdown-item" href="#">..</a></li>
                </ul>
            </div>

            <!-- 나이 선택 -->
            <div id="ageDropdown" class="dropdown flex-container">
                <button class="btn btn-secondary dropdown-toggle dropdown-btn" href="#" role="button"
                        data-bs-toggle="dropdown"
                        aria-expanded="false">
                    나이
                </button>

                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">10대</a></li>
                    <li><a class="dropdown-item" href="#">20대</a></li>
                    <li><a class="dropdown-item" href="#">30대</a></li>
                    <li><a class="dropdown-item" href="#">40대</a></li>
                </ul>
            </div>
        </div>

        <div>
            <div class="team_name">제 3조</div>
            <p></p>
            <p></p>
            <p></p>
        </div>

    </div>

    <div class="maincon">
        <!--이미지 업로드 부분. 원하시는 이미지를 넣어주세요.-->
        <div class="image-up">
            <h1>이미지 업로드</h1>
            <div class="image-upload-section">
            <label for="imageUpload" style="cursor: pointer">
                <img id="uploadImage" src="static/sample/upload.png" alt="Upload Image"
                     style="width:700px; height:700px;">
            </label>
            <!--            <form method="POST" enctype="multipart/form-data">-->
            <input type="file" id="imageUpload" name="file" style="display: none;" onchange="displayImage(this)">

            <!--            </form>-->
            <div>
                <img id="imagePreview" style="display:none; max-width:200px;">
            </div>
            </div>

            <div class="image-generated-section">
                <h1>상품X애니메이션 콜라보 예상</h1>
                <button id="generatedImageBtn">이미지 생성</button>
                <div class="generated-images">
                <input type="file" id="imageGenerate" name="file" style="display: none;" onchange="displayImage(this)">
                </div>
            </div>

            <div class="btn-container">
                <button type="submit">업로드</button>
                <button id="deleteImage">이미지 삭제</button>
            </div>
        </div>
    </div>

    <div>
        <div class="gallery">
            <div class="priority-item">
                <label>1순위</label>
                <img src="{{ url_for('static', filename='ch_image/Dao.png') }}" alt="1순위">
            </div>


            <div class="priority-item">
                <div class="priority-item">
                    <label>2순위</label>
                    <img src="{{ url_for('static', filename='ch_image/Pochacco.png') }}" alt="2순위">
                </div>
            </div>

            <div class="priority-item">
                <label>3순위</label>
                <img src="{{ url_for('static', filename='ch_image/Kuromi.png') }}" alt="3순위">
            </div>
        </div>
    </div>
</div>

<br>
<br>
<br>

</body>
<!-- 푸터 구역-->
<footer>
    <p>※ 해당 페이지에서 쓰인 사진들은 저작권 위배, 수익 창출 등의 목적으로 사용된 것이 아니며, 예시용으로 쓰임을 명시합니다.</p>
</footer>

</html>
